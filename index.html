<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Sign-up Form</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="main">
    <div class="side-hero">
      <div>
        <img
          src="https://cdn.statically.io/gh/TheOdinProject/curriculum/5f37d43908ef92499e95a9b90fc3cc291a95014c/html_css/project-sign-up-form/odin-lined.png"
          alt="Odin Logo">
        <h1>JAY</h1>
      </div>
      <p>Photo by Hailie West on Unsplash</p>
    </div>

    <div class="form-section">

      <div class="header">
        <p>This is not a real online service! You know you need something like this in your life to help you realize
          your deepest dreams. Sign up <em>now</em> to get started.</p>
        <p>You <em>know</em> you want to.</p>
      </div>

      <div>
        <div class='input-section'>
          <p>Let's do this! </p>

          <form id="form">
            <label for="firstname">First Name
              <input type="text" id="firstname" name="firstname" placeholder="Joelle" required>
              <div id='first-name-error' class='error'></div>
            </label>

            <label for="lastname">Last Name
              <input type="text" id="lastname" name="lastname" placeholder="El Homsi" required>
              <div id='last-name-error' class='error'></div>
            </label>

            <label for="email">Email
              <input type="email" id="email" name="email" placeholder="yourname@gmail.com" required autocomplete="off">
              <div id='email-error' class='error'></div>
            </label>

            <label for="phonenumber">Phone Number
              <input type="tel" id="phonenumber" name="phonenumber" placeholder="000-000-0000" required
                pattern='[0-9]{10}'>
              <div id='phonenumber-error' class='error'></div>
            </label>

            <label for="password">Password
              <input type="password" id="password" placeholder="********" name="password" required>
              <div id='password-error' class='error'></div>
            </label>

            <label for="passwordConfirm">Confirm Password
              <input type="password" id="passwordConfirm" name="passwordConfirm" placeholder="********" required>
              <div id='passwordConfirm-error' class='error'></div>
            </label>

          </form>
        </div>
      </div>

      <div class='submit-section'>
        <button type="submit" form="form" >Create Account</button>
        <p>Already have an account? <a href="">Log in</a></p>
      </div>

    </div>

  </div>

  <script>
    const password = document.querySelector('#password');
    const passwordConfirm = document.querySelector('#passwordConfirm');
    const firstname = document.querySelector('#firstname');
    const lastname = document.querySelector('#lastname');
    const email = document.querySelector('#email');
    const phonenumber = document.querySelector('#phonenumber');
    const password_error = document.querySelector('#password-error');
    const passwordConfirm_error = document.querySelector('#passwordConfirm-error');
    const firstnameError = document.querySelector('#first-name-error');
    const lastnameError = document.querySelector('#last-name-error');
    const emailError = document.querySelector('#email-error');
    const phonenumberError = document.querySelector('#phonenumber-error');

    email.addEventListener("input", function (event) {
      if (email.validity.typeMismatch) {
        emailError.textContent = 'Please enter in a valid Email.';
      } else {
        emailError.textContent = '';
      }
    });

    phonenumber.addEventListener("input", function (event) {
      if (phonenumber.validity.patternMismatch) {
        phonenumberError.textContent = 'Please enter in a 10 digit phone number';
      } else {
        phonenumberError.textContent = '';
      }
    });

    function validatePassword(password) {
      // Minimum 8 characters
      if (password.length < 8) {
        return false;
      }

      // Must contain at least one lowercase letter, one uppercase letter, and one number
      var hasLowercase = /[a-z]/.test(password);
      var hasUppercase = /[A-Z]/.test(password);
      var hasNumber = /[0-9]/.test(password);
      if (!hasLowercase || !hasUppercase || !hasNumber) {
        return false;
      }

      // Must not contain any special characters or spaces
      var hasSpecialChar = /[!@#\$%\^\&*\)\(+=._-]/.test(password);
      var hasSpace = /\s/.test(password);
      if (hasSpecialChar || hasSpace) {
        return false;
      }

      return true;
    }

    document.getElementById("form").addEventListener("submit", function (event) {
      if (!validatePassword(password.value)) {
        event.preventDefault();
        pwError.textContent="Invalid Password. Must contain minimum 8 characters, at least one lowercase letter, one uppercase letter, one number, and not any special character or space";
      }
      if(password.value!=passwordConfirm.value){
        event.preventDefault();
        pwCError.textContent="Passwords do not match";
      }
    });

  </script>

</body>

</html>